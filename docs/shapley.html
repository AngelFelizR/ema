<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Predictive Models: Visualisation, Exploration and Explanation</title>
  <meta name="description" content="This book introduces key concepts for exploration, explanation and visualization of complex predictive models.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Predictive Models: Visualisation, Exploration and Explanation" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This book introduces key concepts for exploration, explanation and visualization of complex predictive models." />
  <meta name="github-repo" content="pbiecek/PM_VEE" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Predictive Models: Visualisation, Exploration and Explanation" />
  
  <meta name="twitter:description" content="This book introduces key concepts for exploration, explanation and visualization of complex predictive models." />
  

<meta name="author" content="Przemyslaw Biecek and Tomasz Burzykowski">


<meta name="date" content="2018-12-29">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="variable-attribution-with-interactions.html">
<link rel="next" href="LIME.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Predictive Models:<br/> Visualisation, Exploration and Explanation</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#white-box-models-vs-black-box-models"><i class="fa fa-check"></i><b>1.1</b> White-box models vs Black-box models</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#model-agnostic-vs-model-specific"><i class="fa fa-check"></i><b>1.2</b> Model agnostic vs Model specific</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#why-do-we-need-model-explainers"><i class="fa fa-check"></i><b>1.3</b> Why do we need model explainers?</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#how-model-exploration-is-different-from-data-exploration"><i class="fa fa-check"></i><b>1.4</b> How model exploration is different from data exploration?</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#code-snippets"><i class="fa fa-check"></i><b>1.5</b> Code snippets</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#glossary-notation"><i class="fa fa-check"></i><b>1.6</b> Glossary / Notation</a></li>
<li class="chapter" data-level="1.7" data-path="index.html"><a href="index.html#thanksto"><i class="fa fa-check"></i><b>1.7</b> Acknowledgements</a></li>
<li class="chapter" data-level="1.8" data-path="index.html"><a href="index.html#model-lifecycle"><i class="fa fa-check"></i><b>1.8</b> Model lifecycle</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="prediction-level-explanations.html"><a href="prediction-level-explanations.html"><i class="fa fa-check"></i>Prediction level explanations</a></li>
<li class="chapter" data-level="2" data-path="PredictionExplainers.html"><a href="PredictionExplainers.html"><i class="fa fa-check"></i><b>2</b> Introduction</a><ul>
<li class="chapter" data-level="2.1" data-path="PredictionExplainers.html"><a href="PredictionExplainers.html#approaches-to-prediction-explanations"><i class="fa fa-check"></i><b>2.1</b> Approaches to prediction explanations</a></li>
<li class="chapter" data-level="2.2" data-path="PredictionExplainers.html"><a href="PredictionExplainers.html#three-single-laws"><i class="fa fa-check"></i><b>2.2</b> A bit of philosophy: Three Laws for Prediction Level Explanations</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="variableAttributionMethods.html"><a href="variableAttributionMethods.html"><i class="fa fa-check"></i><b>3</b> Variable attribution for linear models</a><ul>
<li class="chapter" data-level="3.1" data-path="variableAttributionMethods.html"><a href="variableAttributionMethods.html#intuition"><i class="fa fa-check"></i><b>3.1</b> Intuition</a></li>
<li class="chapter" data-level="3.2" data-path="variableAttributionMethods.html"><a href="variableAttributionMethods.html#method"><i class="fa fa-check"></i><b>3.2</b> Method</a></li>
<li class="chapter" data-level="3.3" data-path="variableAttributionMethods.html"><a href="variableAttributionMethods.html#example-wine-quality"><i class="fa fa-check"></i><b>3.3</b> Example: Wine quality</a></li>
<li class="chapter" data-level="3.4" data-path="variableAttributionMethods.html"><a href="variableAttributionMethods.html#pros-and-cons"><i class="fa fa-check"></i><b>3.4</b> Pros and Cons</a></li>
<li class="chapter" data-level="3.5" data-path="variableAttributionMethods.html"><a href="variableAttributionMethods.html#code-snippets-1"><i class="fa fa-check"></i><b>3.5</b> Code snippets</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="breakDown.html"><a href="breakDown.html"><i class="fa fa-check"></i><b>4</b> Variable attributions</a><ul>
<li class="chapter" data-level="4.1" data-path="breakDown.html"><a href="breakDown.html#intuition-1"><i class="fa fa-check"></i><b>4.1</b> Intuition</a></li>
<li class="chapter" data-level="4.2" data-path="breakDown.html"><a href="breakDown.html#method-1"><i class="fa fa-check"></i><b>4.2</b> Method</a></li>
<li class="chapter" data-level="4.3" data-path="breakDown.html"><a href="breakDown.html#example-hire-or-fire"><i class="fa fa-check"></i><b>4.3</b> Example: Hire or Fire?</a></li>
<li class="chapter" data-level="4.4" data-path="breakDown.html"><a href="breakDown.html#pros-and-cons-1"><i class="fa fa-check"></i><b>4.4</b> Pros and cons</a></li>
<li class="chapter" data-level="4.5" data-path="breakDown.html"><a href="breakDown.html#code-snippets-for-r"><i class="fa fa-check"></i><b>4.5</b> Code snippets for R</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="variable-attribution-with-interactions.html"><a href="variable-attribution-with-interactions.html"><i class="fa fa-check"></i><b>5</b> Variable attribution with interactions</a><ul>
<li class="chapter" data-level="5.1" data-path="variable-attribution-with-interactions.html"><a href="variable-attribution-with-interactions.html#intuition-2"><i class="fa fa-check"></i><b>5.1</b> Intuition</a></li>
<li class="chapter" data-level="5.2" data-path="variable-attribution-with-interactions.html"><a href="variable-attribution-with-interactions.html#method-2"><i class="fa fa-check"></i><b>5.2</b> Method</a></li>
<li class="chapter" data-level="5.3" data-path="variable-attribution-with-interactions.html"><a href="variable-attribution-with-interactions.html#example-hire-or-fire-1"><i class="fa fa-check"></i><b>5.3</b> Example: Hire or Fire?</a></li>
<li class="chapter" data-level="5.4" data-path="variable-attribution-with-interactions.html"><a href="variable-attribution-with-interactions.html#break-down-plots"><i class="fa fa-check"></i><b>5.4</b> Break Down Plots</a></li>
<li class="chapter" data-level="5.5" data-path="variable-attribution-with-interactions.html"><a href="variable-attribution-with-interactions.html#pros-and-cons-2"><i class="fa fa-check"></i><b>5.5</b> Pros and cons</a></li>
<li class="chapter" data-level="5.6" data-path="variable-attribution-with-interactions.html"><a href="variable-attribution-with-interactions.html#code-snippets-for-r-1"><i class="fa fa-check"></i><b>5.6</b> Code snippets for R</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="shapley.html"><a href="shapley.html"><i class="fa fa-check"></i><b>6</b> Average variable attributions</a><ul>
<li class="chapter" data-level="6.1" data-path="shapley.html"><a href="shapley.html#intuition-3"><i class="fa fa-check"></i><b>6.1</b> Intuition</a></li>
<li class="chapter" data-level="6.2" data-path="shapley.html"><a href="shapley.html#method-3"><i class="fa fa-check"></i><b>6.2</b> Method</a></li>
<li class="chapter" data-level="6.3" data-path="shapley.html"><a href="shapley.html#example-hire-or-fire-2"><i class="fa fa-check"></i><b>6.3</b> Example: Hire or Fire?</a></li>
<li class="chapter" data-level="6.4" data-path="shapley.html"><a href="shapley.html#pros-and-cons-3"><i class="fa fa-check"></i><b>6.4</b> Pros and cons</a></li>
<li class="chapter" data-level="6.5" data-path="shapley.html"><a href="shapley.html#code-snippets-for-r-2"><i class="fa fa-check"></i><b>6.5</b> Code snippets for R</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="LIME.html"><a href="LIME.html"><i class="fa fa-check"></i><b>7</b> Local approximations with white-box model</a><ul>
<li class="chapter" data-level="7.1" data-path="LIME.html"><a href="LIME.html#intuition-4"><i class="fa fa-check"></i><b>7.1</b> Intuition</a></li>
<li class="chapter" data-level="7.2" data-path="LIME.html"><a href="LIME.html#method-4"><i class="fa fa-check"></i><b>7.2</b> Method</a></li>
<li class="chapter" data-level="7.3" data-path="LIME.html"><a href="LIME.html#example-hire-or-fire-3"><i class="fa fa-check"></i><b>7.3</b> Example: Hire or Fire?</a></li>
<li class="chapter" data-level="7.4" data-path="LIME.html"><a href="LIME.html#pros-and-cons-4"><i class="fa fa-check"></i><b>7.4</b> Pros and cons</a></li>
<li class="chapter" data-level="7.5" data-path="LIME.html"><a href="LIME.html#code-snippets-for-r-3"><i class="fa fa-check"></i><b>7.5</b> Code snippets for R</a><ul>
<li class="chapter" data-level="7.5.1" data-path="LIME.html"><a href="LIME.html#the-lime-pacakge"><i class="fa fa-check"></i><b>7.5.1</b> <strong>The lime pacakge</strong></a></li>
<li class="chapter" data-level="7.5.2" data-path="LIME.html"><a href="LIME.html#the-live-package"><i class="fa fa-check"></i><b>7.5.2</b> <strong>The live package</strong></a></li>
<li class="chapter" data-level="7.5.3" data-path="LIME.html"><a href="LIME.html#the-iml-package"><i class="fa fa-check"></i><b>7.5.3</b> <strong>The iml package</strong></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="ceterisParibus.html"><a href="ceterisParibus.html"><i class="fa fa-check"></i><b>8</b> What-If analysis with the Ceteris Paribus Principle</a><ul>
<li class="chapter" data-level="8.1" data-path="ceterisParibus.html"><a href="ceterisParibus.html#introduction-1"><i class="fa fa-check"></i><b>8.1</b> Introduction</a></li>
<li class="chapter" data-level="8.2" data-path="ceterisParibus.html"><a href="ceterisParibus.html#intuition-5"><i class="fa fa-check"></i><b>8.2</b> Intuition</a></li>
<li class="chapter" data-level="8.3" data-path="ceterisParibus.html"><a href="ceterisParibus.html#method-5"><i class="fa fa-check"></i><b>8.3</b> Method</a><ul>
<li class="chapter" data-level="8.3.1" data-path="ceterisParibus.html"><a href="ceterisParibus.html#ceterisParibus1d"><i class="fa fa-check"></i><b>8.3.1</b> 1D profiles</a></li>
<li class="chapter" data-level="8.3.2" data-path="ceterisParibus.html"><a href="ceterisParibus.html#oscillations"><i class="fa fa-check"></i><b>8.3.2</b> Profile oscillations</a></li>
<li class="chapter" data-level="8.3.3" data-path="ceterisParibus.html"><a href="ceterisParibus.html#d-profiles"><i class="fa fa-check"></i><b>8.3.3</b> 2D profiles</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="ceterisParibus.html"><a href="ceterisParibus.html#local-model-fidelity"><i class="fa fa-check"></i><b>8.4</b> Local model fidelity</a></li>
<li class="chapter" data-level="8.5" data-path="ceterisParibus.html"><a href="ceterisParibus.html#example"><i class="fa fa-check"></i><b>8.5</b> Example</a></li>
<li class="chapter" data-level="8.6" data-path="ceterisParibus.html"><a href="ceterisParibus.html#pros-and-cons-5"><i class="fa fa-check"></i><b>8.6</b> Pros and cons</a></li>
<li class="chapter" data-level="8.7" data-path="ceterisParibus.html"><a href="ceterisParibus.html#code-snippets-for-r-4"><i class="fa fa-check"></i><b>8.7</b> Code snippets for R</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="comparision-of-prediction-level-explainers.html"><a href="comparision-of-prediction-level-explainers.html"><i class="fa fa-check"></i><b>9</b> Comparision of prediction level explainers</a><ul>
<li class="chapter" data-level="9.1" data-path="comparision-of-prediction-level-explainers.html"><a href="comparision-of-prediction-level-explainers.html#when-to-use"><i class="fa fa-check"></i><b>9.1</b> When to use?</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="model-level-explanations.html"><a href="model-level-explanations.html"><i class="fa fa-check"></i>Model level explanations</a></li>
<li class="chapter" data-level="10" data-path="introduction-2.html"><a href="introduction-2.html"><i class="fa fa-check"></i><b>10</b> Introduction</a><ul>
<li class="chapter" data-level="10.1" data-path="introduction-2.html"><a href="introduction-2.html#approaches-to-model-explanations"><i class="fa fa-check"></i><b>10.1</b> Approaches to model explanations</a></li>
<li class="chapter" data-level="10.2" data-path="introduction-2.html"><a href="introduction-2.html#a-bit-of-philosophy-three-laws-for-model-level-explanations"><i class="fa fa-check"></i><b>10.2</b> A bit of philosophy: Three Laws for Model Level Explanations</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="variableImportance.html"><a href="variableImportance.html"><i class="fa fa-check"></i><b>11</b> Variable Importance</a><ul>
<li class="chapter" data-level="11.1" data-path="variableImportance.html"><a href="variableImportance.html#example-price-prediction"><i class="fa fa-check"></i><b>11.1</b> Example: Price prediction</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="variableEngeneering.html"><a href="variableEngeneering.html"><i class="fa fa-check"></i><b>12</b> Feature extraction</a></li>
<li class="chapter" data-level="13" data-path="marginal-response.html"><a href="marginal-response.html"><i class="fa fa-check"></i><b>13</b> Marginal Response</a><ul>
<li class="chapter" data-level="13.1" data-path="marginal-response.html"><a href="marginal-response.html#partialDependence"><i class="fa fa-check"></i><b>13.1</b> Partial Dependency Plots</a></li>
<li class="chapter" data-level="13.2" data-path="marginal-response.html"><a href="marginal-response.html#merging-path-plots"><i class="fa fa-check"></i><b>13.2</b> Merging Path Plots</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="other-topics.html"><a href="other-topics.html"><i class="fa fa-check"></i><b>14</b> Other topics</a></li>
<li class="chapter" data-level="15" data-path="modelComparisons.html"><a href="modelComparisons.html"><i class="fa fa-check"></i><b>15</b> Performance Diagnostic</a></li>
<li class="chapter" data-level="16" data-path="modelAuditing.html"><a href="modelAuditing.html"><i class="fa fa-check"></i><b>16</b> Residual Diagnostic</a></li>
<li class="chapter" data-level="17" data-path="concept-drift.html"><a href="concept-drift.html"><i class="fa fa-check"></i><b>17</b> Concept Drift</a><ul>
<li class="chapter" data-level="17.1" data-path="concept-drift.html"><a href="concept-drift.html#introduction-3"><i class="fa fa-check"></i><b>17.1</b> Introduction</a></li>
<li class="chapter" data-level="17.2" data-path="concept-drift.html"><a href="concept-drift.html#covariate-drift"><i class="fa fa-check"></i><b>17.2</b> Covariate Drift</a></li>
<li class="chapter" data-level="17.3" data-path="concept-drift.html"><a href="concept-drift.html#code-snippets-2"><i class="fa fa-check"></i><b>17.3</b> Code snippets</a></li>
<li class="chapter" data-level="17.4" data-path="concept-drift.html"><a href="concept-drift.html#residual-drift"><i class="fa fa-check"></i><b>17.4</b> Residual Drift</a></li>
<li class="chapter" data-level="17.5" data-path="concept-drift.html"><a href="concept-drift.html#code-snippets-3"><i class="fa fa-check"></i><b>17.5</b> Code snippets</a></li>
<li class="chapter" data-level="17.6" data-path="concept-drift.html"><a href="concept-drift.html#model-drift"><i class="fa fa-check"></i><b>17.6</b> Model Drift</a></li>
<li class="chapter" data-level="17.7" data-path="concept-drift.html"><a href="concept-drift.html#code-snippets-4"><i class="fa fa-check"></i><b>17.7</b> Code snippets</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="appendixes.html"><a href="appendixes.html"><i class="fa fa-check"></i>Appendixes</a></li>
<li class="chapter" data-level="18" data-path="DataSets.html"><a href="DataSets.html"><i class="fa fa-check"></i><b>18</b> Data Sets</a><ul>
<li class="chapter" data-level="18.1" data-path="DataSets.html"><a href="DataSets.html#HRdataset"><i class="fa fa-check"></i><b>18.1</b> Hire or Fire? HR in Call Center</a></li>
<li class="chapter" data-level="18.2" data-path="DataSets.html"><a href="DataSets.html#apartmentsDataset"><i class="fa fa-check"></i><b>18.2</b> How much does it cost? Price prediction for a square meter</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="Packages.html"><a href="Packages.html"><i class="fa fa-check"></i><b>19</b> Packages</a><ul>
<li class="chapter" data-level="19.1" data-path="Packages.html"><a href="Packages.html#arguments"><i class="fa fa-check"></i><b>19.1</b> Arguments</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/pbiecek/DALEX" target="blank">DALEX website</a></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Predictive Models: Visualisation, Exploration and Explanation</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="shapley" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> Average variable attributions</h1>
<p>In the Section <a href="#modelAgnosticAttribution"><strong>??</strong></a> we show the problem related to the ordering of variables. In the Section <a href="breakDown.html#breakDown">4</a> we show an approach in which the ordering was determined based on single step assessment of variable importance.</p>
<p>In this section we introduce other, very popular approach for additive variable attribution. The problem of contributions that depends on the variable ordering is solved by averaging over all possible orderings.</p>
<p>This method is motivated with results in cooperative game theory and was first introduced in <span class="citation">(Štrumbelj and Kononenko <a href="#ref-Strumbelj2014">2014</a>)</span>. Wide adoption of this method comes with a NIPS 2017 paper <span class="citation">(Lundberg and Lee <a href="#ref-SHAP">2017</a>)</span> and python library SHAP <code>https://github.com/slundberg/shap</code>. Authors of the SHAP method introduced also efficient algorithm for tree-based models, see <span class="citation">(Lundberg, Erion, and Lee <a href="#ref-TreeSHAP">2018</a>)</span>.</p>
<div id="intuition-3" class="section level2">
<h2><span class="header-section-number">6.1</span> Intuition</h2>
<p>Since in sequential attribution effect depends on the ordering. Here the idea is to average across all possible orderings.</p>
<p>TODO: a nice example</p>
</div>
<div id="method-3" class="section level2">
<h2><span class="header-section-number">6.2</span> Method</h2>
<p>The name <em>Shapley Values</em> comes from the solution in cooperative game theory attributed to Lloyd Shapley. The original problem was to assess how important is each player to the overall cooperation, and what payoff can he or she reasonably expect from the coalition? <span class="citation">(Shapley <a href="#ref-shapleybook1952">1953</a>)</span></p>
<p>In the context of model interpretability the payoff is the average model response while the players are the variables in the conditioning. Then Formula for variable contributions is following.</p>
<p><span class="math display">\[
v(f, x^*, i) = \frac 1{|P|}\sum_{S \subseteq P\setminus \{i\}}  {{|P|-1}\choose{|S|}}^{-1} \left(E [f(X) | X_{S \cup \{i\}} = x^*_{S \cup \{i\}}] - E [f(X) | X_{S} = x^*_{S}]\right)
\]</span>
where <span class="math inline">\(P = \{1, \ldots, p\}\)</span> is the set of all variables.
The intuition beyond this contribution is following. We consider all possible orderings of variables (yes, there is <span class="math inline">\(2^p\)</span> of them) and calculate the contribution of variable <span class="math inline">\(i\)</span> as an average from contributions calculated in particular orderings.</p>
<p>The part <span class="math inline">\(E[f(X) | X_{S \cup \{i\}} = x^*_{S \cup \{i\}}] - E [f(X) | X_{S} = x^*_{S}]\)</span> is the contribution of variable <span class="math inline">\(i\)</span> which is introduces after variables from <span class="math inline">\(S\)</span>.</p>
<p>Time complexity of this method is <span class="math inline">\(O(2^p)\)</span> where <span class="math inline">\(p\)</span> stands for the number of variables. Such complexity makes this method impractical for most cases. Fortunately it is enough to assess this value. <span class="citation">(Štrumbelj and Kononenko <a href="#ref-Strumbelj2014">2014</a>)</span> proposed to use sampling. <span class="citation">(Lundberg, Erion, and Lee <a href="#ref-TreeSHAP">2018</a>)</span> proposed fast implementations for tree based ensembles.</p>
<p><strong>Properties</strong></p>
<p>Shaply values have (as a single unique solution) following properties</p>
<ul>
<li>Local accuracy. Sum of attributions is equal to the model response.
<span class="math display">\[
f(x^*) = \sum_{i}   v(f, x^*, i) 
\]</span></li>
<li>Missingness, if simplified (add to notation) input is 0, then it’s impact is also 0
<span class="math display">\[
x_i^* = 0 implies   v(f, x^*, i) = 0
\]</span></li>
<li>Consistency, if a new model <span class="math inline">\(g\)</span> is larger for model <span class="math inline">\(f\)</span> then it’s attributions are larger than attributions for <span class="math inline">\(f\)</span>.</li>
</ul>
</div>
<div id="example-hire-or-fire-2" class="section level2">
<h2><span class="header-section-number">6.3</span> Example: Hire or Fire?</h2>
</div>
<div id="pros-and-cons-3" class="section level2">
<h2><span class="header-section-number">6.4</span> Pros and cons</h2>
<p>Shapley Values give a uniform approach to decompose model prediction into parts that can be attributed additively to variables. Below we summarize key strengths and weaknesses of this approach.</p>
<p><strong>Pros</strong></p>
<ul>
<li>There is a nice theory based on cooperative games.</li>
<li><span class="citation">(Lundberg and Lee <a href="#ref-SHAP">2017</a>)</span> shows that this method unifies different approaches to additive features attribution, like DeepLIFT, Layer-Wise Relevance Propagation, LIME.</li>
<li>There is efficient implementation available for Python.</li>
<li><span class="citation">(Lundberg and Lee <a href="#ref-SHAP">2017</a>)</span> shows more desired properties of this method, like symmetry or additivity.</li>
</ul>
<p><strong>Cons</strong></p>
<ul>
<li>The exact calculation of Shapley values is time consuming.</li>
<li>If the model is not additive, then the Shaply scores may be misleading. And there is no way to determine if model is far from additiveness.</li>
</ul>
<p>Note that fully additive model solutions presented in sections <a href="#modelAgnosticAttribution"><strong>??</strong></a>, <a href="breakDown.html#breakDown">4</a> and <a href="shapley.html#shapley">6</a> lead to same variable contributions.</p>
</div>
<div id="code-snippets-for-r-2" class="section level2">
<h2><span class="header-section-number">6.5</span> Code snippets for R</h2>
<p>In this section we will present an example based on the <code>HR</code> dataset and Random Forest model <span class="citation">(Breiman et al. <a href="#ref-R-randomForest">2018</a>)</span>. See the Section <a href="DataSets.html#HRdataset">18.1</a> for more details.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1"><span class="kw">library</span>(<span class="st">&quot;DALEX&quot;</span>)</a>
<a class="sourceLine" id="cb26-2" data-line-number="2"><span class="kw">library</span>(<span class="st">&quot;randomForest&quot;</span>)</a>
<a class="sourceLine" id="cb26-3" data-line-number="3"><span class="kw">set.seed</span>(<span class="dv">123</span>)</a>
<a class="sourceLine" id="cb26-4" data-line-number="4">model_rf &lt;-<span class="st"> </span><span class="kw">randomForest</span>(status <span class="op">~</span><span class="st"> </span>gender <span class="op">+</span><span class="st"> </span>age <span class="op">+</span><span class="st"> </span>hours <span class="op">+</span><span class="st"> </span>evaluation <span class="op">+</span><span class="st"> </span>salary, <span class="dt">data =</span> HR)</a></code></pre></div>
<p>First, we use a <code>shapper</code> package - a wrapper over SHAP python package.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="kw">library</span>(<span class="st">&quot;shapper&quot;</span>)</a>
<a class="sourceLine" id="cb27-2" data-line-number="2">Y_train &lt;-<span class="st"> </span>HR<span class="op">$</span>status</a>
<a class="sourceLine" id="cb27-3" data-line-number="3">x_train &lt;-<span class="st"> </span>HR[ , <span class="dv">-6</span>]</a>
<a class="sourceLine" id="cb27-4" data-line-number="4">x_train<span class="op">$</span>gender &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(x_train<span class="op">$</span>gender)</a>
<a class="sourceLine" id="cb27-5" data-line-number="5">model_rfs &lt;-<span class="st"> </span><span class="kw">randomForest</span>(<span class="dt">x =</span> x_train, <span class="dt">y =</span> Y_train)</a>
<a class="sourceLine" id="cb27-6" data-line-number="6"></a>
<a class="sourceLine" id="cb27-7" data-line-number="7">p_fun &lt;-<span class="st"> </span><span class="cf">function</span>(x, data){</a>
<a class="sourceLine" id="cb27-8" data-line-number="8">  <span class="kw">predict</span>(x, <span class="dt">newdata =</span> data, <span class="dt">type =</span> <span class="st">&quot;prob&quot;</span>)</a>
<a class="sourceLine" id="cb27-9" data-line-number="9">}</a>
<a class="sourceLine" id="cb27-10" data-line-number="10"></a>
<a class="sourceLine" id="cb27-11" data-line-number="11">new_observation &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">gender =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb27-12" data-line-number="12">                      <span class="dt">age =</span> <span class="fl">57.7</span>,</a>
<a class="sourceLine" id="cb27-13" data-line-number="13">                      <span class="dt">hours =</span> <span class="fl">42.3</span>,</a>
<a class="sourceLine" id="cb27-14" data-line-number="14">                      <span class="dt">evaluation =</span> <span class="dv">2</span>,</a>
<a class="sourceLine" id="cb27-15" data-line-number="15">                      <span class="dt">salary =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb27-16" data-line-number="16"></a>
<a class="sourceLine" id="cb27-17" data-line-number="17">x &lt;-<span class="st"> </span><span class="kw">individual_variable_effect</span>(<span class="dt">x =</span> model_rfs, <span class="dt">data =</span> x_train, <span class="dt">predict_function =</span> p_fun,</a>
<a class="sourceLine" id="cb27-18" data-line-number="18">                               <span class="dt">new_observation =</span> new_observation)</a>
<a class="sourceLine" id="cb27-19" data-line-number="19"></a>
<a class="sourceLine" id="cb27-20" data-line-number="20"><span class="co">#plot(x)</span></a>
<a class="sourceLine" id="cb27-21" data-line-number="21"><span class="kw">library</span>(<span class="st">&quot;ggplot2&quot;</span>)</a>
<a class="sourceLine" id="cb27-22" data-line-number="22"></a>
<a class="sourceLine" id="cb27-23" data-line-number="23">x<span class="op">$</span><span class="st">`</span><span class="dt">_vname_</span><span class="st">`</span> &lt;-<span class="st"> </span><span class="kw">reorder</span>(x<span class="op">$</span><span class="st">`</span><span class="dt">_vname_</span><span class="st">`</span>, x<span class="op">$</span><span class="st">`</span><span class="dt">_attribution_</span><span class="st">`</span>, <span class="cf">function</span>(z) <span class="op">-</span><span class="kw">sum</span>(<span class="kw">abs</span>(z)))</a>
<a class="sourceLine" id="cb27-24" data-line-number="24"><span class="kw">levels</span>(x<span class="op">$</span><span class="st">`</span><span class="dt">_vname_</span><span class="st">`</span>) &lt;-<span class="st"> </span><span class="kw">paste</span>(<span class="kw">sapply</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, substr, <span class="dt">x=</span><span class="st">&quot;        &quot;</span>, <span class="dt">start=</span><span class="dv">1</span>), <span class="kw">levels</span>(x<span class="op">$</span><span class="st">`</span><span class="dt">_vname_</span><span class="st">`</span>))</a>
<a class="sourceLine" id="cb27-25" data-line-number="25"></a>
<a class="sourceLine" id="cb27-26" data-line-number="26"><span class="kw">ggplot</span>(x, <span class="kw">aes</span>(<span class="dt">x=</span><span class="st">`</span><span class="dt">_vname_</span><span class="st">`</span>, <span class="dt">xend=</span><span class="st">`</span><span class="dt">_vname_</span><span class="st">`</span>, </a>
<a class="sourceLine" id="cb27-27" data-line-number="27">              <span class="dt">yend =</span> <span class="st">`</span><span class="dt">_yhat_mean_</span><span class="st">`</span>, <span class="dt">y =</span> <span class="st">`</span><span class="dt">_yhat_mean_</span><span class="st">`</span> <span class="op">+</span><span class="st"> `</span><span class="dt">_attribution_</span><span class="st">`</span>, </a>
<a class="sourceLine" id="cb27-28" data-line-number="28">              <span class="dt">color=</span><span class="st">`</span><span class="dt">_sign_</span><span class="st">`</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb27-29" data-line-number="29"><span class="st">  </span><span class="kw">geom_segment</span>(<span class="dt">arrow =</span> <span class="kw">arrow</span>(<span class="dt">length=</span><span class="kw">unit</span>(<span class="fl">0.30</span>,<span class="st">&quot;cm&quot;</span>), <span class="dt">ends=</span><span class="st">&quot;first&quot;</span>, <span class="dt">type =</span> <span class="st">&quot;closed&quot;</span>)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb27-30" data-line-number="30"><span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label =</span> <span class="kw">round</span>(<span class="st">`</span><span class="dt">_attribution_</span><span class="st">`</span>, <span class="dv">2</span>)), <span class="dt">nudge_x =</span> <span class="fl">0.45</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb27-31" data-line-number="31"><span class="st">  </span><span class="kw">geom_segment</span>(<span class="kw">aes</span>(<span class="dt">x =</span> <span class="st">&quot;_predicted_&quot;</span>,<span class="dt">xend =</span> <span class="st">&quot;_predicted_&quot;</span>,</a>
<a class="sourceLine" id="cb27-32" data-line-number="32">                   <span class="dt">y =</span> <span class="st">`</span><span class="dt">_yhat_</span><span class="st">`</span>, <span class="dt">yend =</span> <span class="st">`</span><span class="dt">_yhat_mean_</span><span class="st">`</span>), <span class="dt">size =</span> <span class="dv">2</span>, <span class="dt">color=</span><span class="st">&quot;black&quot;</span>,</a>
<a class="sourceLine" id="cb27-33" data-line-number="33">               <span class="dt">arrow =</span> <span class="kw">arrow</span>(<span class="dt">length=</span><span class="kw">unit</span>(<span class="fl">0.30</span>,<span class="st">&quot;cm&quot;</span>), <span class="dt">ends=</span><span class="st">&quot;first&quot;</span>, <span class="dt">type =</span> <span class="st">&quot;closed&quot;</span>)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb27-34" data-line-number="34"><span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">x =</span> <span class="st">&quot;_predicted_&quot;</span>, </a>
<a class="sourceLine" id="cb27-35" data-line-number="35">                <span class="dt">y =</span> <span class="st">`</span><span class="dt">_yhat_</span><span class="st">`</span>, <span class="dt">label =</span> <span class="kw">round</span>(<span class="st">`</span><span class="dt">_yhat_</span><span class="st">`</span>, <span class="dv">2</span>)), <span class="dt">nudge_x =</span> <span class="fl">0.45</span>, <span class="dt">color=</span><span class="st">&quot;black&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb27-36" data-line-number="36"><span class="st">  </span><span class="kw">geom_hline</span>(<span class="kw">aes</span>(<span class="dt">yintercept =</span> <span class="st">`</span><span class="dt">_yhat_mean_</span><span class="st">`</span>)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb27-37" data-line-number="37"><span class="st">  </span><span class="kw">facet_grid</span>(<span class="st">`</span><span class="dt">_label_</span><span class="st">`</span><span class="op">~</span><span class="st">`</span><span class="dt">_ylevel_</span><span class="st">`</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb27-38" data-line-number="38"><span class="st">  </span><span class="kw">scale_color_manual</span>(<span class="dt">values =</span>  <span class="kw">c</span>(<span class="st">`</span><span class="dt">-</span><span class="st">`</span> =<span class="st"> &quot;#d8b365&quot;</span>, <span class="st">`</span><span class="dt">0</span><span class="st">`</span> =<span class="st"> &quot;#f5f5f5&quot;</span>, <span class="st">`</span><span class="dt">+</span><span class="st">`</span> =<span class="st"> &quot;#5ab4ac&quot;</span>, </a>
<a class="sourceLine" id="cb27-39" data-line-number="39">                                <span class="dt">X =</span> <span class="st">&quot;darkgrey&quot;</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb27-40" data-line-number="40"><span class="st">  </span><span class="kw">coord_flip</span>() <span class="op">+</span><span class="st"> </span><span class="kw">theme_minimal</span>() <span class="op">+</span><span class="st"> </span><span class="kw">theme</span>(<span class="dt">legend.position=</span><span class="st">&quot;none&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">ylab</span>(<span class="st">&quot;&quot;</span>)</a></code></pre></div>
<p><img src="PM_VEE_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
<p>Here we use the <code>iml</code> package, see more examples in <span class="citation">(Molnar, Bischl, and Casalicchio <a href="#ref-imlPackage">2018</a>)</span>.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1"><span class="kw">library</span>(<span class="st">&quot;iml&quot;</span>)</a>
<a class="sourceLine" id="cb28-2" data-line-number="2">explainer_rf =<span class="st"> </span>Predictor<span class="op">$</span><span class="kw">new</span>(model_rf, <span class="dt">data =</span> HR, <span class="dt">type=</span><span class="st">&quot;prob&quot;</span>)</a></code></pre></div>
<p>Explanations for a new observation.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1">new_observation &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">gender =</span> <span class="kw">factor</span>(<span class="st">&quot;male&quot;</span>, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;male&quot;</span>, <span class="st">&quot;female&quot;</span>)),</a>
<a class="sourceLine" id="cb29-2" data-line-number="2">                      <span class="dt">age =</span> <span class="fl">57.7</span>,</a>
<a class="sourceLine" id="cb29-3" data-line-number="3">                      <span class="dt">hours =</span> <span class="fl">42.3</span>,</a>
<a class="sourceLine" id="cb29-4" data-line-number="4">                      <span class="dt">evaluation =</span> <span class="dv">2</span>,</a>
<a class="sourceLine" id="cb29-5" data-line-number="5">                      <span class="dt">salary =</span> <span class="dv">2</span>,</a>
<a class="sourceLine" id="cb29-6" data-line-number="6">                      <span class="dt">status =</span> <span class="kw">factor</span>(<span class="st">&quot;fired&quot;</span>))</a>
<a class="sourceLine" id="cb29-7" data-line-number="7"></a>
<a class="sourceLine" id="cb29-8" data-line-number="8">shapley =<span class="st"> </span>Shapley<span class="op">$</span><span class="kw">new</span>(explainer_rf, <span class="dt">x.interest =</span> new_observation)</a>
<a class="sourceLine" id="cb29-9" data-line-number="9">shapley</a></code></pre></div>
<pre><code>## Interpretation method:  Shapley 
## Predicted value: 0.768000, Average prediction: 0.375522 (diff = 0.392478) Predicted value: 0.232000, Average prediction: 0.275811 (diff = -0.043811) Predicted value: 0.000000, Average prediction: 0.348667 (diff = -0.348667)
## 
## Analysed predictor: 
## Prediction task: unknown 
## 
## 
## Analysed data:
## Sampling from data.frame with 7847 rows and 6 columns.
## 
## Head of results:
##      feature class      phi    phi.var feature.value
## 1     gender fired  0.15184 0.06525201   gender=male
## 2        age fired  0.10980 0.07939374      age=57.7
## 3      hours fired  0.23736 0.11281486    hours=42.3
## 4 evaluation fired  0.03640 0.01645164  evaluation=2
## 5     salary fired -0.17504 0.04931632      salary=2
## 6     status fired  0.00000 0.00000000  status=fired</code></pre>
<p>And the plot with Shapley attributions.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1"><span class="kw">plot</span>(shapley)</a></code></pre></div>
<p><img src="PM_VEE_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
<p>See more examples for <code>iml</code> package in the <span class="citation">(Molnar <a href="#ref-molnar">2018</a><a href="#ref-molnar">b</a>)</span> book.</p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-Strumbelj2014">
<p>Štrumbelj, Erik, and Igor Kononenko. 2014. “Explaining Prediction Models and Individual Predictions with Feature Contributions.” <em>Knowledge and Information Systems</em> 41 (3): 647–65. <a href="https://doi.org/10.1007/s10115-013-0679-x">https://doi.org/10.1007/s10115-013-0679-x</a>.</p>
</div>
<div id="ref-SHAP">
<p>Lundberg, Scott M, and Su-In Lee. 2017. “A Unified Approach to Interpreting Model Predictions.” In <em>Advances in Neural Information Processing Systems 30</em>, edited by I. Guyon, U. V. Luxburg, S. Bengio, H. Wallach, R. Fergus, S. Vishwanathan, and R. Garnett, 4765–74. Curran Associates, Inc. <a href="http://papers.nips.cc/paper/7062-a-unified-approach-to-interpreting-model-predictions.pdf">http://papers.nips.cc/paper/7062-a-unified-approach-to-interpreting-model-predictions.pdf</a>.</p>
</div>
<div id="ref-TreeSHAP">
<p>Lundberg, Scott M., Gabriel G. Erion, and Su-In Lee. 2018. “Consistent Individualized Feature Attribution for Tree Ensembles.” <em>CoRR</em> abs/1802.03888. <a href="http://arxiv.org/abs/1802.03888">http://arxiv.org/abs/1802.03888</a>.</p>
</div>
<div id="ref-shapleybook1952">
<p>Shapley, Lloyd S. 1953. “A Value for N-Person Games.” In <em>Contributions to the Theory of Games Ii</em>, edited by Harold W. Kuhn and Albert W. Tucker, 307–17. Princeton: Princeton University Press.</p>
</div>
<div id="ref-R-randomForest">
<p>Breiman, Leo, Adele Cutler, Andy Liaw, and Matthew Wiener. 2018. <em>RandomForest: Breiman and Cutler’s Random Forests for Classification and Regression</em>. <a href="https://CRAN.R-project.org/package=randomForest">https://CRAN.R-project.org/package=randomForest</a>.</p>
</div>
<div id="ref-imlPackage">
<p>Molnar, Christoph, Bernd Bischl, and Giuseppe Casalicchio. 2018. “Iml: An R Package for Interpretable Machine Learning.” <em>JOSS</em> 3 (26). ournal of Open Source Software: 786. <a href="https://doi.org/10.21105/joss.00786">https://doi.org/10.21105/joss.00786</a>.</p>
</div>
<div id="ref-molnar">
<p>Molnar, Christoph. 2018b. <em>Interpretable Machine Learning</em>. https://christophm.github.io/interpretable-ml-book/.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="variable-attribution-with-interactions.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="LIME.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": ["PM_VEE.pdf", "PM_VEE.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
